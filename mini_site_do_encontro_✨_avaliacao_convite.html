<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Miss√£o L√≠bano-Portugal‚ù§Ô∏è</title>
  <meta name="description" content="Avalie nosso √∫ltimo encontro e combine o pr√≥ximo em um fluxo fofo de uma pergunta por vez." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    /* ======= TOKENS DE DESIGN (clean + acentos üá±üáßüáµüáπ) ======= */
    :root{
      --bg:#ffffff; --ink:#1A1A1A; --muted:#6B7280; --line:#E5E7EB;
      --red:#C81E1E; --green:#0B8A3A; --ok:#16A34A; --warn:#F7C600;
      --rad:20px; --shadow:0 6px 24px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--ink); background:var(--bg)}
    .wrap{max-width:900px;margin:0 auto;padding:28px 16px 64px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin:6px 0 20px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;background:#fff; border:1px solid var(--line); overflow:hidden; box-shadow:0 10px 24px rgba(200,30,30,.12)}
    .logo img{width:100%;height:100%;object-fit:cover}
    h1{margin:0;font-size:clamp(22px,3.2vw,34px);font-weight:800;letter-spacing:-.02em}
    .muted{color:var(--muted)}
    .underline{height:2px;background:linear-gradient(90deg,var(--green),var(--red));border-radius:2px;margin-top:6px}
    .card{background:#fff;border:1px solid var(--line);border-radius:var(--rad);box-shadow:var(--shadow); padding:20px}

    /* ======= STEPPER ======= */
    .stepper{display:flex;gap:8px;align-items:center;margin:10px 0 18px}
    .step{width:10px;height:10px;border-radius:999px;background:#E5E7EB}
    .step.done{background:var(--green)}
    .step.active{background:var(--red)}

    /* ======= FORM / CONTROLES ======= */
    .screen{display:none;opacity:0;transform:translateY(6px);transition:.22s ease}
    .screen.active{display:block;opacity:1;transform:none}
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    .btn{appearance:none;border:none;padding:12px 16px;border-radius:14px;font-weight:700;cursor:pointer}
    .btn-primary{background:var(--red);color:#fff}
    .btn-ghost{background:#fff;color:var(--ink);border:1px solid var(--line)}
    .btn:disabled{opacity:.45;cursor:not-allowed}

    label{font-weight:600;display:block;margin:0 0 8px}
    input[type="text"], input[type="date"], input[type="time"], textarea{
      width:100%; background:#fff; color:var(--ink); border:1px solid var(--line); border-radius:12px; padding:12px 14px; font:inherit; outline:none; transition:.2s border-color, .2s box-shadow;
    }
    textarea{min-height:120px; resize:vertical}
    input:focus, textarea:focus{ border-color:rgba(12,160,70,.6); box-shadow:0 0 0 4px rgba(12,160,70,.12)}

    /* ======= RATING HEARTS ======= */
    .hearts{display:flex;gap:8px}
    .heart{position:relative;width:40px;height:40px}
    .heart input{appearance:none;-webkit-appearance:none;margin:0;width:40px;height:40px;cursor:pointer}
    .heart svg{position:absolute;inset:0;width:40px;height:40px;fill:#E5E7EB;transition:.15s transform,.2s fill}
    .heart input:checked ~ svg, .heart input:hover ~ svg, .heart input:focus ~ svg{fill:var(--red);transform:translateY(-1px) scale(1.06)}

    .grid{display:grid;gap:12px}
    @media (min-width:760px){ .grid-2{grid-template-columns:1fr 1fr} }

    .hint{font-size:13px;color:var(--muted)}
    .ok{color:var(--ok)}
    footer{margin-top:22px;text-align:center;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"><img src="stitch.jpg" alt="Stitch"></div>
        <div>
          <h1>Miss√£o L√≠bano-Portugal‚ù§Ô∏è</h1>
          <div class="underline" aria-hidden="true"></div>
        </div>
      </div>
    </header>

    <div class="card">
      <!-- STEPPER -->
      <div class="stepper" id="stepper" aria-hidden="true"></div>

      <!-- SCREENS -->
      <form id="flow" class="grid">
        <!-- DIV 0 ‚Äî Sauda√ß√£o -->
        <section class="screen active" data-step="0">
          <p style="margin:0 0 8px;font-size:18px;font-weight:700">Nariman, amei nosso primeiro encontro!</p>
          <p class="muted" style="margin:0 0 12px">Conforme as diretrizes da LGPD, este question√°rio possui termo de uso: suas respostas ser√£o armazenadas exclusivamente em meu cora√ß√£o e utilizadas para aperfei√ßoar encontros futuros. Site protegido com muito amor ‚ù§Ô∏è</p>
          <div class="controls">
            <button class="btn btn-primary" data-next>Come√ßar</button>
          </div>
        </section>

        <!-- DIV 1 ‚Äî Nota geral -->
        <section class="screen" data-step="1">
          <label>Que nota voc√™ d√° pro nosso encontro? ‚≠ê</label>
          <div class="hearts" role="radiogroup" aria-label="Nota do encontro">
            <label class="heart"><input type="radio" name="nota" value="1" required><svg viewBox="0 0 24 24"><path d="M12 21s-6.716-4.52-9.193-7.65C1.1 11.3 1 8.8 2.6 7.2a4.6 4.6 0 016.5 0L12 10l2.9-2.8a4.6 4.6 0 016.5 0c1.6 1.6 1.5 4.1-.207 6.15C18.716 16.48 12 21 12 21z"/></svg></label>
            <label class="heart"><input type="radio" name="nota" value="2"><svg viewBox="0 0 24 24"><path d="M12 21s-6.716-4.52-9.193-7.65C1.1 11.3 1 8.8 2.6 7.2a4.6 4.6 0 016.5 0L12 10l2.9-2.8a4.6 4.6 0 016.5 0c1.6 1.6 1.5 4.1-.207 6.15C18.716 16.48 12 21 12 21z"/></svg></label>
            <label class="heart"><input type="radio" name="nota" value="3"><svg viewBox="0 0 24 24"><path d="M12 21s-6.716-4.52-9.193-7.65C1.1 11.3 1 8.8 2.6 7.2a4.6 4.6 0 016.5 0L12 10l2.9-2.8a4.6 4.6 0 016.5 0c1.6 1.6 1.5 4.1-.207 6.15C18.716 16.48 12 21 12 21z"/></svg></label>
            <label class="heart"><input type="radio" name="nota" value="4"><svg viewBox="0 0 24 24"><path d="M12 21s-6.716-4.52-9.193-7.65C1.1 11.3 1 8.8 2.6 7.2a4.6 4.6 0 016.5 0L12 10l2.9-2.8a4.6 4.6 0 016.5 0c1.6 1.6 1.5 4.1-.207 6.15C18.716 16.48 12 21 12 21z"/></svg></label>
            <label class="heart"><input type="radio" name="nota" value="5"><svg viewBox="0 0 24 24"><path d="M12 21s-6.716-4.52-9.193-7.65C1.1 11.3 1 8.8 2.6 7.2a4.6 4.6 0 016.5 0L12 10l2.9-2.8a4.6 4.6 0 016.5 0c1.6 1.6 1.5 4.1-.207 6.15C18.716 16.48 12 21 12 21z"/></svg></label>
          </div>
          <div class="controls">
            <button class="btn btn-ghost" data-prev type="button">Voltar</button>
            <button class="btn btn-primary" data-next disabled>Pr√≥ximo</button>
          </div>
          <div class="hint" id="rating-hint" style="margin-top:6px"></div>
        </section>

        <!-- DIV 2 ‚Äî O que voc√™ mais gostou? -->
        <section class="screen" data-step="2">
          <label for="gostou">O que voc√™ mais curtiu?</label>
          <textarea id="gostou" name="gostou" placeholder="Ex.: conversa profunda, piadas bobas, PPT feito de madrugada, qu√≠mica‚Ä¶"></textarea>
          <div class="controls">
            <button class="btn btn-ghost" data-prev type="button">Voltar</button>
            <button class="btn btn-primary" data-next>Pr√≥ximo</button>
          </div>
        </section>

        <!-- DIV 3 ‚Äî O que posso melhorar? -->
        <section class="screen" data-step="3">
          <label for="melhorar">E o que posso melhorar pro pr√≥ximo?</label>
          <textarea id="melhorar" name="melhorar" placeholder="Sua opini√£o √© muito importante para n√≥s!"></textarea>
          <div class="controls">
            <button class="btn btn-ghost" data-prev type="button">Voltar</button>
            <button class="btn btn-primary" data-next>Pr√≥ximo</button>
          </div>
        </section>

        <!-- DIV 4 ‚Äî Marcar pr√≥ximo encontro (sem lugar) -->
        <section class="screen" data-step="4">
          <p style="margin:0 0 6px;font-weight:700">J√° estou ansioso para te ver de novo üòç</p>
          <label style="margin-top:8px">Quando podemos nos ver?</label>
          <div class="grid grid-2">
            <div>
              <label for="data" class="muted" style="font-weight:600">Data</label>
              <input id="data" name="data" type="date">
            </div>
            <div>
              <label for="hora" class="muted" style="font-weight:600">Hora</label>
              <input id="hora" name="hora" type="time">
            </div>
          </div>
          <div class="controls">
            <button class="btn btn-ghost" data-prev type="button">Voltar</button>
            <button class="btn btn-primary" data-next>Pr√≥ximo</button>
          </div>
        </section>

        <!-- DIV 5 ‚Äî Confirma√ß√£o + envio pro Sheets -->
        <section class="screen" data-step="5">
          <p style="margin:0 0 10px;font-weight:700">Confere se est√° tudo certinho üëá</p>
          <div id="resumo" class="muted" style="line-height:1.6"></div>
          <div class="controls">
            <button class="btn btn-ghost" data-prev type="button">Editar respostas</button>
            <button class="btn btn-primary" id="enviar" type="button">Enviar</button>
          </div>
        </section>

        <!-- DIV 6 ‚Äî Tela de agradecimento -->
        <section class="screen" data-step="6">
          <p style="margin:0 0 8px;font-size:18px;font-weight:700">Obrigad√≠ssimo, Nariman! üíñ</p>
          <p class="muted" style="margin:0 0 12px">Suas respostas foram recebidas com carinho. O setor respons√°vel vai entrar em contato em breve. J√° estou contando os dias para o pr√≥ximo encontro! ‚ú®</p>
          <div class="controls">
            <button class="btn btn-primary" type="button" onclick="window.close?.();">Fechar</button>
          </div>
        </section>
      </form>
    </div>

    <footer>
      Feito com carinho ‚Äî e um pouco de JavaScript ‚Äî por <strong>voc√™</strong> üí´
    </footer>
  </div>

  <script>
    // ========= STATE =========
    const flow = document.getElementById('flow');
    const screens = [...flow.querySelectorAll('.screen')];
    const stepper = document.getElementById('stepper');

    // Cria stepper (n√£o inclui a tela final de agradecimento)
    const totalSteps = screens.length - 1; // telas de 0 a 5
    for(let i=0;i<totalSteps;i++){
      const s = document.createElement('div'); s.className='step' + (i===0?' active':''); stepper.appendChild(s);
    }

    function setStep(idx){
      screens.forEach((sc,i)=>{ sc.classList.toggle('active', i===idx); });
      const dots = [...stepper.children];
      dots.forEach((d,i)=>{ d.className = 'step' + (i<idx? ' done':'' ) + (i===idx? ' active':'' ); });
      current = idx;
      updateResumo();
    }

    let current = 0;

    // Pr√≥ximo/Anterior
    flow.addEventListener('click', (e)=>{
      const nextBtn = e.target.closest('[data-next]');
      const prevBtn = e.target.closest('[data-prev]');
      if(nextBtn){ e.preventDefault(); goNext(); }
      if(prevBtn){ e.preventDefault(); if(current>0) setStep(current-1); }
    });

    function goNext(){
      // valida√ß√µes simples
      if(current===1){
        const has = flow.querySelector('input[name="nota"]:checked');
        if(!has){ return; }
      }
      if(current < 5) setStep(current+1); // at√© a tela de confirma√ß√£o
    }

    // Habilitar Pr√≥ximo na etapa de nota
    const ratingNext = screens[1].querySelector('[data-next]');
    screens[1].addEventListener('change', ()=>{
      const has = flow.querySelector('input[name="nota"]:checked');
      ratingNext.disabled = !has;
      const hint = document.getElementById('rating-hint');
      if(has){
        const map = {1:'temos espa√ßo pra brilho ‚ú®',2:'quase l√° üëÄ',3:'bom com potencial üòå',4:'amei, estamos no caminho! üôå',5:'perfeito, repetiria f√°cil! ü•∞'}
        hint.textContent = map[has.value] || '';
      }
    });

    // data m√≠nima = amanh√£
    const dataEl = document.getElementById('data');
    if(dataEl){ const t = new Date(); t.setDate(t.getDate()+1); dataEl.min = t.toISOString().split('T')[0]; }

    // Resumo din√¢mico (Div 5)
    function updateResumo(){
      if(current!==5) return;
      const nota = (flow.querySelector('input[name="nota"]:checked')||{}).value || '‚Äî';
      const gostou = (flow.gostou?.value||'').trim() || '‚Äî';
      const melhorar = (flow.melhorar?.value||'').trim() || '‚Äî';
      const data = flow.data?.value || ''; const hora = flow.hora?.value || '';
      const dataFmt = data? new Date(data + 'T' + (hora||'19:00')).toLocaleString('pt-BR', {dateStyle:'full', timeStyle: hora? 'short':'short'}) : '';

      const linhas = [
        `‚≠ê Nota: <strong>${nota}</strong>`,
        `‚ù§Ô∏è Curtiu: ${escapeHtml(gostou)}`,
        `üõ†Ô∏è Melhorar: ${escapeHtml(melhorar)}`,
        (dataFmt)? `üìç Pr√≥ximo: ${dataFmt}` : null
      ].filter(Boolean);
      document.getElementById('resumo').innerHTML = linhas.join('<br>');
    }

    function escapeHtml(s){ return s.replace(/[&<>"']/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m])); }

    // Envio para Google Sheets (placeholder)
    const SHEETS_WEBAPP_URL = ""; // ‚Üê depois colamos aqui a URL do Web App do Apps Script
    document.getElementById('enviar').addEventListener('click', async ()=>{
      const payload = collectPayload();
      try{
        if(!SHEETS_WEBAPP_URL){
          // Mostra a tela final mesmo em modo demo, para voc√™ ver o fluxo completo
          setStep(6);
          return;
        }
        await fetch(SHEETS_WEBAPP_URL, {
          method:'POST', mode:'no-cors', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)
        });
        setStep(6); // vai para a tela de agradecimento
      }catch(err){
        alert('N√£o consegui enviar agora. Podemos testar a integra√ß√£o do Sheets em seguida.');
        console.error(err);
      }
    });

    function collectPayload(){
      const nota = (flow.querySelector('input[name="nota"]:checked')||{}).value || '';
      return {
        timestamp: new Date().toISOString(),
        nome: 'Nariman',
        nota,
        gostou: (flow.gostou?.value||'').trim(),
        melhorar: (flow.melhorar?.value||'').trim(),
        data: flow.data?.value || '',
        hora: flow.hora?.value || ''
      };
    }
  </script>
</body>
</html>
